---
phase: 06-complete-normering-data
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/data/tests.ts
  - apps/web/src/data/normering/varen-2025.json
  - apps/web/src/data/normering/hosten-2024.json
  - apps/web/src/data/normering/varen-2024.json
  - apps/web/public/pdfs/varen-2025/
  - apps/web/public/pdfs/hosten-2024/
  - apps/web/public/pdfs/varen-2024/
autonomous: true

must_haves:
  truths:
    - "VT 2025, HT 2024, VT 2024 test pages display normering charts"
    - "Normering PDFs for these tests are stored locally"
    - "tests.ts has normering file references for these tests"
  artifacts:
    - path: "apps/web/src/data/normering/varen-2025.json"
      provides: "VT 2025 normering distribution data"
      contains: "testId.*varen-2025"
    - path: "apps/web/src/data/normering/hosten-2024.json"
      provides: "HT 2024 normering distribution data"
      contains: "testId.*hosten-2024"
    - path: "apps/web/src/data/normering/varen-2024.json"
      provides: "VT 2024 normering distribution data"
      contains: "testId.*varen-2024"
  key_links:
    - from: "apps/web/src/data/tests.ts"
      to: "local PDFs"
      via: "normering file entries"
      pattern: 'fileType.*normering'
---

<objective>
Download normering PDFs and extract JSON data for the 2024-2025 tests (VT 2025, HT 2024, VT 2024).

Purpose: Complete normering data for the most recent tests - highest user value and most relevant for current test-takers.
Output: 3 new JSON files with normering data, normering PDFs stored locally, tests.ts updated with file references.
</objective>

<execution_context>
@/Users/williamlarsten/.claude/get-shit-done/workflows/execute-plan.md
@/Users/williamlarsten/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-complete-normering-data/06-RESEARCH.md
@apps/web/src/data/tests.ts
@apps/web/src/data/normering/hosten-2025.json
@apps/web/src/lib/normering/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Download normering PDFs for 2024-2025 tests</name>
  <files>
    apps/web/public/pdfs/varen-2025/
    apps/web/public/pdfs/hosten-2024/
    apps/web/public/pdfs/varen-2024/
    apps/web/src/data/tests.ts
  </files>
  <action>
Download normering PDFs from studera.nu for these 3 tests:

**VT 2025** (varen-2025):
- Source page: https://www.studera.nu/hogskoleprov/fpn/normeringstabeller-varen-2025/
- Download: helaprovet, verbal, kvantitativ PDFs
- Store in: apps/web/public/pdfs/varen-2025/
- Naming: norm25a-helaprovet.pdf, norm25a-verb.pdf, norm25a-kvant.pdf

**HT 2024** (hosten-2024):
- Source page: https://www.studera.nu/hogskoleprov/fpn/normeringstabeller-hosten-2024/
- Download: helaprovet, verbal, kvantitativ PDFs
- Store in: apps/web/public/pdfs/hosten-2024/
- Naming: norm24b-helaprovet.pdf, norm24b-verb.pdf, norm24b-kvant.pdf

**VT 2024** (varen-2024):
- Source page: https://www.studera.nu/hogskoleprov/fpn/normeringstabeller-varen-2024/
- Download: helaprovet, verbal, kvantitativ PDFs
- Store in: apps/web/public/pdfs/varen-2024/
- Naming: norm24a-helaprovet.pdf, norm24a-verb.pdf, norm24a-kvant.pdf

Use curl or wget to download. Check file sizes are reasonable (>50KB each).

After downloading, update apps/web/src/data/tests.ts to add normering file entries:
- For each test, add 3 new entries to the files array
- Use fileType: "normering" and section: "verbal"|"kvantitativ"|undefined (for helaprovet)
- Get actual file sizes using ls -l

Example entry pattern (from hosten-2025):
```typescript
{ id: "hosten-2024-norm-hela", fileType: "normering", filename: "norm24b-helaprovet.pdf", sizeBytes: ACTUAL_SIZE },
{ id: "hosten-2024-norm-kvant", fileType: "normering", section: "kvantitativ", filename: "norm24b-kvant.pdf", sizeBytes: ACTUAL_SIZE },
{ id: "hosten-2024-norm-verb", fileType: "normering", section: "verbal", filename: "norm24b-verb.pdf", sizeBytes: ACTUAL_SIZE },
```
  </action>
  <verify>
ls -la apps/web/public/pdfs/{varen-2025,hosten-2024,varen-2024}/norm*.pdf
# Should show 9 PDF files (3 per test)
# Each file should be >50KB

grep -c "normering" apps/web/src/data/tests.ts
# Should show increased count (was 3 for hosten-2025, now 12)
  </verify>
  <done>
9 normering PDFs downloaded and stored locally. tests.ts updated with 9 new normering file entries for VT 2025, HT 2024, VT 2024.
  </done>
</task>

<task type="auto">
  <name>Task 2: Extract and validate normering JSON for 2024-2025 tests</name>
  <files>
    apps/web/src/data/normering/varen-2025.json
    apps/web/src/data/normering/hosten-2024.json
    apps/web/src/data/normering/varen-2024.json
  </files>
  <action>
Extract normering data from PDFs into JSON format matching the existing schema.

For each test (varen-2025, hosten-2024, varen-2024):

1. Read the helaprovet PDF - extract total distribution table:
   - 41 rows (HP scores 0.00 to 2.00 in 0.05 increments)
   - Columns: HP-poang (hpScore), Antal (count), Procent (percentage), Kumulativ procent (cumulativePercentage)
   - Extract mean, stdDev, totalParticipants from header text

2. Read the verbal PDF - extract verbal distribution table:
   - 21 rows (HP scores 0.0 to 2.0 in 0.1 increments)
   - Same columns as above
   - Extract mean, stdDev, totalParticipants

3. Read the kvantitativ PDF - extract kvantitativ distribution table:
   - 21 rows (HP scores 0.0 to 2.0 in 0.1 increments)
   - Same columns as above
   - Extract mean, stdDev, totalParticipants

4. Create JSON file following the exact schema of hosten-2025.json:

```json
{
  "testId": "{slug}",
  "testDate": "{YYYY-MM-DD}",
  "total": {
    "mean": X.XX,
    "stdDev": X.XX,
    "totalParticipants": NNNNN,
    "distribution": [
      { "hpScore": 0.00, "count": N, "percentage": X.XX, "cumulativePercentage": X.XX },
      ...
    ]
  },
  "verbal": { ... },
  "kvantitativ": { ... }
}
```

**Validation checklist for each file:**
- Total distribution has 41 rows (0.00 to 2.00)
- Verbal/kvantitativ distributions have 21 rows each (0.0 to 2.0)
- Final cumulative percentage is 100.00 (or very close)
- Mean is between 0.5 and 1.5 (typical range)
- stdDev is between 0.2 and 0.6 (typical range)
- Participant counts sum to totalParticipants (approximately, may have rounding)

**Swedish number handling:**
- Space is thousands separator (1 234 -> 1234)
- Comma may be decimal separator (0,90 -> 0.90)
  </action>
  <verify>
# Check JSON files exist and have correct structure
ls -la apps/web/src/data/normering/*.json
# Should show 4 files (hosten-2025 + 3 new)

# Validate JSON syntax
for f in apps/web/src/data/normering/*.json; do
  echo "Validating $f"
  node -e "JSON.parse(require('fs').readFileSync('$f', 'utf8'))"
done

# Start dev server and check pages render
cd apps/web && bun run build 2>&1 | head -20
# Build should succeed without errors
  </verify>
  <done>
3 new JSON files created (varen-2025.json, hosten-2024.json, varen-2024.json). Each file validated for structure and data accuracy. Build passes without errors.
  </done>
</task>

</tasks>

<verification>
1. PDF files exist in correct locations with reasonable sizes
2. tests.ts has normering entries for all 4 tests (hosten-2025 + 3 new)
3. JSON files exist for all 4 tests
4. JSON files pass syntax validation
5. Build succeeds
6. Test pages display normering charts (manual verification: run dev server, visit /hogskoleprovet/varen-2025)
</verification>

<success_criteria>
- 9 normering PDFs downloaded and stored locally
- tests.ts updated with normering file references for VT 2025, HT 2024, VT 2024
- 3 new JSON files created with valid normering data
- All JSON files match schema (41 rows for total, 21 for verbal/kvant)
- bun run build succeeds without errors
- Test pages display normering section with charts
</success_criteria>

<output>
After completion, create `.planning/phases/06-complete-normering-data/06-01-SUMMARY.md`
</output>
